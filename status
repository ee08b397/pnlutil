#!/bin/bash -e

source util.sh

HELP="
Prints progress for <var>.
Run in directory with 'data.sh' that sets <var> file path
and 'caselist'.

Usage:

    $SCRIPT <var>

"

[[ $# -lt 1 || $1 == "-h" || $1 == "--help" ]] && usage 1
[ -f ./data.sh ] || { echo "Run in directory with 'data.sh'"; usage 1; }
var=$1

case='*' && source ./data.sh
[ -n "${!var}" ] || { echo "Set '$var' in data.sh"; exit 1; }
[ -n "$caselist" ] || { echo "Set 'caselist' in data.sh"; exit 1; }

if [[ ${!var} == *:* ]]; then  # is remote
    IFS=":" read -r server remotepath <<<"${!var}"
    num_exist=$(ssh $server "echo $remotepath | wc -w")
else
    num_exist=$(echo ${!var} | wc -w)
fi

printf "%s/%s\n" $num_exist $(echo $caselist | wc -w)
